<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile - Movitour</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { background: url('./Imagenes/playa-dia.jpg') no-repeat center center fixed; background-size: cover; transition: background 0.5s ease-in-out; }
  body.dark { background: url('./Imagenes/playa-noche.jpg') no-repeat center center fixed; background-size: cover; }
</style>
</head>
<body class="text-white flex justify-center items-center h-screen">

<div class="bg-blue-800 bg-opacity-80 p-8 rounded-2xl shadow-xl w-96 text-center">
  <img id="profileLogo" src="./Imagenes/Modelo logo.png" class="w-20 mx-auto mb-4" alt="Logo">
  <h1 class="text-2xl font-bold mb-4">Perfil de Usuario</h1>
  <p id="userName" class="mb-2">Nombre: --</p>
  <p id="userEmail">Correo: --</p>
  <button id="logoutBtn" class="mt-4 w-full bg-yellow-400 hover:bg-yellow-500 text-black py-2 rounded font-bold">Cerrar sesión</button>
</div>

<button id="darkModeToggle" class="absolute top-4 left-4 bg-yellow-400 hover:bg-yellow-500 text-black px-3 py-1 rounded">🌙</button>

<script>
const darkToggle=document.getElementById('darkModeToggle');
const body=document.body;
const profileLogo=document.getElementById('profileLogo');

// Persist dark mode
if(localStorage.getItem('darkMode')==='true'){ body.classList.add('dark'); darkToggle.textContent='☀️'; profileLogo.src='./Imagenes/Modelo logo.png'; }

// Toggle dark mode
darkToggle.addEventListener('click',()=>{
  body.classList.toggle('dark');
  const isDark=body.classList.contains('dark');
  darkToggle.textContent=isDark?'☀️':'🌙';
  localStorage.setItem('darkMode',isDark);
});

// Load user info
document.addEventListener('DOMContentLoaded',()=>{
  const name=localStorage.getItem('userName')||'--';
  const email=localStorage.getItem('userEmail')||'--';
  document.getElementById('userName').textContent=`Nombre: ${name}`;
  document.getElementById('userEmail').textContent=`Correo: ${email}`;
});

// Logout
document.getElementById('logoutBtn').addEventListener('click',()=>{
  localStorage.removeItem('jwtToken');
  localStorage.removeItem('userName');
  localStorage.removeItem('userEmail');
  window.location.href='login.html';
});
</script>

<script>
// /* AUTH GUARD */
(function(){
  const token = localStorage.getItem('token');
  if(!token){
    window.location.href = 'register.html';
    return;
  }
  // Hide Profile links in navs if needed (global enhancement)
  document.querySelectorAll('a[href="profile.html"]').forEach(a=>{
    a.style.display = token ? '' : 'none';
  });
})();
</script>

</body>
</html>

